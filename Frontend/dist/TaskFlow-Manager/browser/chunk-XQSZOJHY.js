import{d as B,e as N,f as Y,g as q,i as K}from"./chunk-CHPXGTD3.js";import{$ as f,$a as F,Bb as I,Db as G,Ha as A,Jb as $,La as z,O as H,Ra as U,Sa as o,T as u,Ta as a,Ua as d,Va as V,Wa as _,Xa as k,Y as O,Z as y,_ as g,bb as x,c as Q,cb as S,d as Z,ja as R,wa as v}from"./chunk-XJJQQKAW.js";var X=Q((E,T)=>{"use strict";(function(p,e){typeof define=="function"&&define.amd?define([],e):typeof E<"u"?e():(e(),p.FileSaver={})})(E,function(){"use strict";function p(t,n){return typeof n>"u"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\uFEFF",t],{type:t.type}):t}function e(t,n,m){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){M(i.response,n,m)},i.onerror=function(){console.error("could not download file")},i.send()}function s(t){var n=new XMLHttpRequest;n.open("HEAD",t,!1);try{n.send()}catch{}return 200<=n.status&&299>=n.status}function l(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,h=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),M=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!h?function(t,n,m){var i=r.URL||r.webkitURL,c=document.createElement("a");n=n||t.name||"download",c.download=n,c.rel="noopener",typeof t=="string"?(c.href=t,c.origin===location.origin?l(c):s(c.href)?e(t,n,m):l(c,c.target="_blank")):(c.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(c.href)},4e4),setTimeout(function(){l(c)},0))}:"msSaveOrOpenBlob"in navigator?function(t,n,m){if(n=n||t.name||"download",typeof t!="string")navigator.msSaveOrOpenBlob(p(t,m),n);else if(s(t))e(t,n,m);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){l(i)})}}:function(t,n,m,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return e(t,n,m);var c=t.type==="application/octet-stream",J=/constructor/i.test(r.HTMLElement)||r.safari,D=/CriOS\/[\d]+/.test(navigator.userAgent);if((D||c&&J||h)&&typeof FileReader<"u"){var C=new FileReader;C.onloadend=function(){var b=C.result;b=D?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=b:location=b,i=null},C.readAsDataURL(t)}else{var j=r.URL||r.webkitURL,P=j.createObjectURL(t);i?i.location=P:location.href=P,i=null,setTimeout(function(){j.revokeObjectURL(P)},4e4)}});r.saveAs=M.saveAs=M,typeof T<"u"&&(T.exports=M)})});var L=Z(X());var w=class p{http=u($);API_URL="http://localhost:5208/api/Export";exportToExcel(){return this.http.get(`${this.API_URL}/excel`,{responseType:"blob",observe:"response"}).subscribe({next:e=>{let s=e.headers.get("content-disposition"),l=`TaskFlow_Tareas_${this.getDateString()}.xlsx`;if(s){let r=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(s);r!=null&&r[1]&&(l=r[1].replace(/['"]/g,""))}e.body&&(0,L.saveAs)(e.body,l)},error:e=>{console.error("Error al exportar Excel:",e),alert("Error al descargar el archivo Excel")}})}exportToPdf(){return this.http.get(`${this.API_URL}/pdf`,{responseType:"blob",observe:"response"}).subscribe({next:e=>{let s=e.headers.get("content-disposition"),l=`TaskFlow_Tareas_${this.getDateString()}.pdf`;if(s){let r=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(s);r!=null&&r[1]&&(l=r[1].replace(/['"]/g,""))}e.body&&(0,L.saveAs)(e.body,l)},error:e=>{console.error("Error al exportar PDF:",e),alert("Error al descargar el archivo PDF")}})}getDateString(){let e=new Date;return`${e.getFullYear()}${(e.getMonth()+1).toString().padStart(2,"0")}${e.getDate().toString().padStart(2,"0")}_${e.getHours().toString().padStart(2,"0")}${e.getMinutes().toString().padStart(2,"0")}${e.getSeconds().toString().padStart(2,"0")}`}static \u0275fac=function(s){return new(s||p)};static \u0275prov=H({token:p,factory:p.\u0275fac,providedIn:"root"})};function te(p,e){if(p&1){let s=V();o(0,"div",41)(1,"button",42),_("click",function(){O(s);let r=k();return y(r.exportToExcel())}),g(),o(2,"svg",4),d(3,"path",43)(4,"polyline",44)(5,"line",45)(6,"line",46)(7,"polyline",47),a(),f(),o(8,"span"),x(9,"Excel (.xlsx)"),a()(),o(10,"button",48),_("click",function(){O(s);let r=k();return y(r.exportToPdf())}),g(),o(11,"svg",4),d(12,"path",43)(13,"polyline",44)(14,"line",45)(15,"line",46)(16,"line",49),a(),f(),o(17,"span"),x(18,"PDF (.pdf)"),a()()()}}var W=class p{router=u(N);exportService=u(w);authService=u(K);showExportMenu=R(!1);currentUser=this.authService.currentUser;logout(){this.authService.logout()}toggleExportMenu(){this.showExportMenu.update(e=>!e)}exportToExcel(){this.showExportMenu.set(!1),this.exportService.exportToExcel()}exportToPdf(){this.showExportMenu.set(!1),this.exportService.exportToPdf()}static \u0275fac=function(s){return new(s||p)};static \u0275cmp=A({type:p,selectors:[["app-dashboard"]],decls:59,vars:5,consts:[[1,"wrapper"],[1,"sidebar"],[1,"logo"],[1,"logo-icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M9 11l3 3L22 4"],["d","M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"],["routerLink","/dashboard/kanban","routerLinkActive","active",1,"nav-item"],["x","3","y","3","width","7","height","7"],["x","14","y","3","width","7","height","7"],["x","14","y","14","width","7","height","7"],["x","3","y","14","width","7","height","7"],["routerLink","/dashboard/list","routerLinkActive","active",1,"nav-item"],["x1","8","y1","6","x2","21","y2","6"],["x1","8","y1","12","x2","21","y2","12"],["x1","8","y1","18","x2","21","y2","18"],["x1","3","y1","6","x2","3.01","y2","6"],["x1","3","y1","12","x2","3.01","y2","12"],["x1","3","y1","18","x2","3.01","y2","18"],[1,"export-section"],[1,"section-title"],[1,"export-btn",3,"click"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"chevron"],["points","6 9 12 15 18 9"],["class","export-menu",4,"ngIf"],[1,"sidebar-footer"],[1,"user-info"],[1,"avatar"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"user-details"],[1,"username"],[1,"user-email"],["title","Cerrar sesi\xF3n",1,"logout",3,"click"],["d","M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],["points","16 17 21 12 16 7"],["x1","21","y1","12","x2","9","y2","12"],[1,"content"],[1,"export-menu"],[1,"export-option","excel",3,"click"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["points","10 9 9 9 8 9"],[1,"export-option","pdf",3,"click"],["x1","12","y1","9","x2","12","y2","21"]],template:function(s,l){if(s&1&&(o(0,"div",0)(1,"aside",1)(2,"div",2)(3,"div",3),g(),o(4,"svg",4),d(5,"path",5)(6,"path",6),a()(),f(),o(7,"h2"),x(8,"TaskFlow"),a()(),o(9,"nav")(10,"a",7),g(),o(11,"svg",4),d(12,"rect",8)(13,"rect",9)(14,"rect",10)(15,"rect",11),a(),f(),o(16,"span"),x(17,"Kanban"),a()(),o(18,"a",12),g(),o(19,"svg",4),d(20,"line",13)(21,"line",14)(22,"line",15)(23,"line",16)(24,"line",17)(25,"line",18),a(),f(),o(26,"span"),x(27,"Lista"),a()(),o(28,"div",19)(29,"div",20),x(30,"Exportar"),a(),o(31,"button",21),_("click",function(){return l.toggleExportMenu()}),g(),o(32,"svg",4),d(33,"path",22)(34,"polyline",23)(35,"line",24),a(),f(),o(36,"span"),x(37,"Descargar tareas"),a(),g(),o(38,"svg",25),d(39,"polyline",26),a()(),z(40,te,19,0,"div",27),a()(),f(),o(41,"div",28)(42,"div",29)(43,"div",30),g(),o(44,"svg",4),d(45,"path",31)(46,"circle",32),a()(),f(),o(47,"div",33)(48,"span",34),x(49),a(),o(50,"span",35),x(51),a()()(),o(52,"button",36),_("click",function(){return l.logout()}),g(),o(53,"svg",4),d(54,"path",37)(55,"polyline",38)(56,"line",39),a()()()(),f(),o(57,"main",40),d(58,"router-outlet"),a()()),s&2){let r,h;v(38),F("rotate",l.showExportMenu()),v(2),U("ngIf",l.showExportMenu()),v(9),S(((r=l.currentUser())==null?null:r.fullName)||"Usuario"),v(2),S(((h=l.currentUser())==null?null:h.email)||"")}},dependencies:[B,Y,q,G,I],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;min-height:100vh;background:#f5f7fa}.sidebar[_ngcontent-%COMP%]{width:280px;background:linear-gradient(180deg,#667eea,#764ba2);color:#fff;display:flex;flex-direction:column;box-shadow:4px 0 20px #0000001a;position:fixed;height:100vh;overflow-y:auto;z-index:100}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000001a}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:3px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff80}.logo[_ngcontent-%COMP%]{padding:2rem 1.5rem;display:flex;align-items:center;gap:1rem;border-bottom:1px solid rgba(255,255,255,.1)}.logo-icon[_ngcontent-%COMP%]{width:45px;height:45px;background:#fff3;border-radius:12px;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.logo-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;stroke-width:2.5}.logo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700;letter-spacing:-.5px}nav[_ngcontent-%COMP%]{flex:1;padding:1.5rem 0;overflow-y:auto}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.875rem;padding:.875rem 1.5rem;margin:.25rem .75rem;color:#fffc;text-decoration:none;border-radius:.75rem;transition:all .3s ease;font-weight:500;font-size:.95rem}.nav-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}.nav-item[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#fff;transform:translate(4px)}.nav-item.active[_ngcontent-%COMP%]{background:#fff3;color:#fff;box-shadow:0 4px 12px #0000001a}.export-section[_ngcontent-%COMP%]{margin-top:2rem;padding-top:2rem;border-top:1px solid rgba(255,255,255,.1)}.section-title[_ngcontent-%COMP%]{padding:0 1.5rem;margin-bottom:.75rem;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:#ffffff80}.export-btn[_ngcontent-%COMP%]{width:calc(100% - 1.5rem);padding:.875rem 1.5rem;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);color:#ffffffe6;display:flex;align-items:center;gap:.75rem;cursor:pointer;transition:all .3s ease;font-size:.95rem;border-radius:.75rem;margin:0 .75rem;font-weight:500}.export-btn[_ngcontent-%COMP%]:hover{background:#ffffff26;border-color:#fff3;color:#fff;transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.export-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:first-child{width:20px;height:20px;flex-shrink:0}.export-btn[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{width:16px;height:16px;margin-left:auto;transition:transform .3s ease;opacity:.7}.export-btn[_ngcontent-%COMP%]   .chevron.rotate[_ngcontent-%COMP%]{transform:rotate(180deg)}.export-menu[_ngcontent-%COMP%]{padding:.5rem;margin:.5rem .75rem 0;background:#00000026;border-radius:.75rem;animation:_ngcontent-%COMP%_slideDown .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1)}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.export-option[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;background:transparent;border:none;color:#ffffffd9;display:flex;align-items:center;gap:.75rem;cursor:pointer;transition:all .3s ease;font-size:.9rem;border-radius:.5rem;margin-bottom:.375rem;font-weight:500}.export-option[_ngcontent-%COMP%]:last-child{margin-bottom:0}.export-option[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;flex-shrink:0}.export-option.excel[_ngcontent-%COMP%]:hover{background:#22c55e33;color:#4ade80;transform:translate(4px)}.export-option.pdf[_ngcontent-%COMP%]:hover{background:#ef444433;color:#f87171;transform:translate(4px)}.sidebar-footer[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid rgba(255,255,255,.1);display:flex;align-items:center;gap:.75rem;background:#0000001a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex:1;min-width:0}.avatar[_ngcontent-%COMP%]{width:42px;height:42px;background:#fff3;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;border:2px solid rgba(255,255,255,.3)}.avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.125rem;min-width:0;flex:1}.username[_ngcontent-%COMP%]{font-weight:600;font-size:.9rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.user-email[_ngcontent-%COMP%]{font-size:.75rem;color:#fff9;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.logout[_ngcontent-%COMP%]{width:38px;height:38px;background:#ef444426;border:1px solid rgba(239,68,68,.3);color:#fca5a5;border-radius:.5rem;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;flex-shrink:0}.logout[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.logout[_ngcontent-%COMP%]:hover{background:#ef444440;border-color:#ef444480;color:#f87171;transform:scale(1.05)}.content[_ngcontent-%COMP%]{flex:1;margin-left:280px;padding:2rem;overflow-y:auto}@media(max-width:1024px){.sidebar[_ngcontent-%COMP%]{width:260px}.content[_ngcontent-%COMP%]{margin-left:260px;padding:1.5rem}.logo[_ngcontent-%COMP%]{padding:1.5rem 1.25rem}.logo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.35rem}}@media(max-width:768px){.sidebar[_ngcontent-%COMP%]{width:240px}.content[_ngcontent-%COMP%]{margin-left:240px;padding:1rem}.logo[_ngcontent-%COMP%]{padding:1.25rem 1rem}.logo-icon[_ngcontent-%COMP%]{width:38px;height:38px}.logo-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.logo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}.nav-item[_ngcontent-%COMP%]{padding:.75rem 1.25rem;margin:.25rem .5rem;font-size:.9rem}.nav-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.export-section[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem}.section-title[_ngcontent-%COMP%]{font-size:.7rem;padding:0 1.25rem}.export-btn[_ngcontent-%COMP%]{font-size:.875rem;padding:.75rem 1.25rem;margin:0 .5rem;width:calc(100% - 1rem)}.export-menu[_ngcontent-%COMP%]{margin:.5rem .5rem 0}.export-option[_ngcontent-%COMP%]{padding:.75rem .875rem;font-size:.85rem}.sidebar-footer[_ngcontent-%COMP%]{padding:1.25rem 1rem}.avatar[_ngcontent-%COMP%]{width:36px;height:36px}.avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.username[_ngcontent-%COMP%]{font-size:.85rem}.user-email[_ngcontent-%COMP%]{font-size:.7rem}.logout[_ngcontent-%COMP%]{width:34px;height:34px}.logout[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}}@media(max-width:640px){.sidebar[_ngcontent-%COMP%]{width:100%;position:relative;height:auto;border-bottom:2px solid rgba(255,255,255,.1)}.content[_ngcontent-%COMP%]{margin-left:0;padding:1rem}.logo[_ngcontent-%COMP%]{justify-content:center;padding:1rem}nav[_ngcontent-%COMP%]{padding:1rem 0}.nav-item[_ngcontent-%COMP%]{justify-content:center}.export-section[_ngcontent-%COMP%]{margin-top:1rem;padding-top:1rem}.export-btn[_ngcontent-%COMP%]{justify-content:center}.sidebar-footer[_ngcontent-%COMP%]{justify-content:center;padding:1rem}.user-email[_ngcontent-%COMP%]{display:none}.username[_ngcontent-%COMP%]{max-width:120px}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.wrapper[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease}.sidebar[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]{scroll-behavior:smooth}.nav-item[_ngcontent-%COMP%]:focus, .export-btn[_ngcontent-%COMP%]:focus, .export-option[_ngcontent-%COMP%]:focus, .logout[_ngcontent-%COMP%]:focus{outline:2px solid rgba(255,255,255,.5);outline-offset:2px}.export-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.export-option[_ngcontent-%COMP%]:active{transform:translate(2px)}.logout[_ngcontent-%COMP%]:active{transform:scale(.95)}"]})};export{W as DashboardComponent};
